jQuery(document).ready(function ($) {
var $ams_photo_icon = $('#ams_photo_icon');
var $ams_photo_image_preview = $('#ams_photo_image_preview')
$(document).on('click', '.ams_photo_media_upload', function (e) {
e.preventDefault();
var wp_media_frame = wp.media({
title: 'Select photo icon',
multiple: false
});
wp_media_frame.on('select', function () {
var attachment = wp_media_frame.state().get('selection').first().toJSON();
$ams_photo_icon.val(attachment.id);
$ams_photo_image_preview.attr('src', attachment.url).show();
$('.ams_photo_media_remove').show();
});
wp_media_frame.open();
});
$(document).on('click', '.ams_photo_media_remove', function (e) {
e.preventDefault();
$ams_photo_icon.val('');
$ams_photo_image_preview.hide();
$(this).hide();
});
});